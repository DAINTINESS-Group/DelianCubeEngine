DATASOURCE TYPE: RDBMS WITH INI FILE: InputFiles/foodmart_reduced/dbc.ini;

CREATE DIMENSION customer_dim
LIST OF LEVELS {
	CREATE LEVEL customer WITH ATTRIBUTES{
		customer_id: Number DATASOURCE customer_id,
		account_num: Number DATASOURCE account_num,
		lname: Text DATASOURCE lname,
		fname: Text DATASOURCE fname,
		mi: Text DATASOURCE mi,
		address1: Text DATASOURCE address1,
		address2: Text DATASOURCE address2,
		address3: Text DATASOURCE address3,
		address4: Text DATASOURCE address4,
		postal_code: Text DATASOURCE postal_code,
		phone1: Text DATASOURCE phone1,
		phone2: Text DATASOURCE phone2,
		birthdate: Data DATASOURCE birthdate,
		marital_status: Text DATASOURCE marital_status,
		yearly_income: Text DATASOURCE yearly_income,
		gender: Text DATASOURCE gender,
		total_children: Number DATASOURCE total_children,
		num_children_at_home: Number DATASOURCE num_children_at_home,
		education: Text DATASOURCE education,
		date_accnt_opened: Date DATASOURCE date_accnt_opened,
		member_card: Text DATASOURCE member_card,
		occupation: Text DATASOURCE occupation,
		houseowner: Text DATASOURCE houseowner,
		num_cars_owned: Number DATASOURCE num_cars_owned,
		fullname: Text DATASOURCE fullname
	} WITH ID: customer_id AND DESCRIPTION: fullname,
	CREATE LEVEL region WITH ATTRIBUTES{
		customer_region_id: Number DATASOURCE customer_region_id,
		city: Text DATASOURCE city
	} WITH ID: customer_region_id AND DESCRIPTION: city,
	CREATE LEVEL state WITH ATTRIBUTES{
		state_province: Text DATASOURCE state_province
	} WITH ID: state_province AND DESCRIPTION: state_province,
	CREATE LEVEL country WITH ATTRIBUTES{
		country: Text DATASOURCE country
	} WITH ID: country AND DESCRIPTION: country,
	CREATE LEVEL All_customer WITH ATTRIBUTES{
		All: Text DATASOURCE All
	} WITH ID: All AND DESCRIPTION: All	
}
HIERARCHY customer>region>state>country>All_customer
DATASOURCE customer;


CREATE DIMENSION date_dim
LIST OF LEVELS {
    CREATE LEVEL date WITH ATTRIBUTES{
		time_id: Number DATASOURCE time_id,
        the_date: Date DATASOURCE the_date,
		the_day: Text DATASOURCE the_day,
		the_month: Text DATASOURCE the_month,
		day_of_month: Number DATASOURCE day_of_month,
		week_of_year: Number DATASOURCE week_of_year,
		month_of_year: Number DATASOURCE month_of_year,
		quarter: Text DATASOURCE quarter
    } WITH ID: time_id AND DESCRIPTION: the_date,
	CREATE LEVEL month WITH ATTRIBUTES{
        year_and_month: Text DATASOURCE year_and_month
    } WITH ID: year_and_month AND DESCRIPTION: year_and_month,
    CREATE LEVEL quarter WITH ATTRIBUTES{
        year_quarter: Text DATASOURCE year_quarter
    } WITH ID: year_quarter AND DESCRIPTION: year_quarter,
	CREATE LEVEL year WITH ATTRIBUTES{
		the_year: Number DATASOURCE the_year
	} WITH ID: the_year and DESCRIPTION: the_year,
	CREATE LEVEL All_date WITH ATTRIBUTES{
		All: Text DATASOURCE All
	} WITH ID: All AND DESCRIPTION: All	
}
HIERARCHY date>month>quarter>year>All_date
DIMENSION_TYPE date
DATASOURCE date;


CREATE DIMENSION product_dim
LIST OF LEVELS {
	CREATE LEVEL product WITH ATTRIBUTES{
		product_id: Number DATASOURCE product_id,
		product_name: Text DATASOURCE product_name,
		brand_name: Text DATASOURCE brand_name,
		SKU: Number DATASOURCE SKU,
		SRP: Number DATASOURCE SRP,
		gross_weight: Number DATASOURCE gross_weight,
		net_weight: Number DATASOURCE net_weight,
		recyclable_package: Number DATASOURCE recyclable_package,
		low_fat: Number DATASOURCE low_fat,
		units_per_case: Number DATASOURCE units_per_case,
		cases_per_pallet: Number DATASOURCE cases_per_pallet,
		shelf_width: Number DATASOURCE shelf_width,
		shelf_height: Number DATASOURCE shelf_height,
		shelf_depth: Number DATASOURCE shelf_depth,
		product_department: Text DATASOURCE product_department,
		product_family: Text DATASOURCE product_family
	} WITH ID: product_id AND DESCRIPTION: product_name,
    CREATE LEVEL product_subcategory WITH ATTRIBUTES{
        product_class_id: Number DATASOURCE product_class_id,
		product_subcategory: text DATASOURCE product_subcategory
    } WITH ID: product_class_id AND DESCRIPTION: product_subcategory,
	CREATE LEVEL product_category WITH ATTRIBUTES{
		product_category: Text DATASOURCE product_category
	} WITH ID: product_category AND DESCRIPTION: product_category,
	CREATE LEVEL All_product WITH ATTRIBUTES{
		All: Text DATASOURCE All
	} WITH ID: All AND DESCRIPTION: All
}
HIERARCHY product>product_subcategory>product_category>All_product
DATASOURCE product;


CREATE DIMENSION promotion_dim
LIST OF LEVELS {
	CREATE LEVEL promotion WITH ATTRIBUTES{
		promotion_id: Number DATASOURCE promotion_id,
		promotion_name: Text DATASOURCE promotion_name,
		promotion_district_id: Number DATASOURCE promotion_district_id,
		cost: Number DATASOURCE cost,
		start_date: Date DATASOURCE start_date,
		end_date: Data DATASOURCE end_date
	} WITH ID: promotion_id AND DESCRIPTION: promotion_name,
	CREATE LEVEL media WITH ATTRIBUTES{
		media_type: Text DATASOURCE media_type
	} WITH ID: media_type AND DESCRIPTION: media_type,
	CREATE LEVEL All_promotion WITH ATTRIBUTES{
		All: Text DATASOURCE All
	} WITH ID: All AND DESCRIPTION: All
}	
HIERARCHY promotion>media>All_promotion
DATASOURCE promotion;	
	
	
CREATE DIMENSION store_dim
LIST OF LEVELS {
	CREATE LEVEL store WITH ATTRIBUTES{
		store_id: Number DATASOURCE store_id,
		store_name: Text DATASOURCE store_name,
		store_type: Text DATASOURCE store_type,
		store_number: Number DATASOURCE store_number,
		store_street_address: Text DATASOURCE store_street_address,
		store_postal_code: Text DATASOURCE store_postal_code,
		store_manager: Text DATASOURCE store_manager,
		store_phone: Text DATASOURCE store_phone,
		store_fax: Text DATASOURCE store_fax,
		first_opened_date: Date DATASOURCE first_opened_date,
		last_remodel_date: Date DATASOURCE last_remodel_date,
		store_sqft: Number DATASOURCE store_sqft,
		grocery_sqft: Number DATASOURCE grocery_sqft,
		frozen_sqft: Number DATASOURCE frozen_sqft,
		meat_sqft: Number DATASOURCE meat_sqft,
		coffee_bar: Number DATASOURCE coffee_bar,
		video_store: Number DATASOURCE video_store,
		salad_bar: Number DATASOURCE salad_bar,
		prepared_food: Number DATASOURCE prepared_food,
		florist: Number DATASOURCE florist
	}WITH ID: store_id AND DESCRIPTION: store_name,
    CREATE LEVEL store_region WITH ATTRIBUTES{
		region_id: Number DATASOURCE region_id,
		store_city: Text DATASOURCE store_city
    } WITH ID: region_id AND DESCRIPTION: store_city,
    CREATE LEVEL store_state WITH ATTRIBUTES{
        store_state: Text DATASOURCE store_state
    } WITH ID: store_state AND DESCRIPTION: store_state,
    CREATE LEVEL store_country WITH ATTRIBUTES{
        store_country: Text DATASOURCE store_country
    } WITH ID: store_country AND DESCRIPTION: store_country,
	CREATE LEVEL All_store WITH ATTRIBUTES{
		All: Text DATASOURCE All
	}WITH ID: All AND DESCRIPTION: All
}
HIERARCHY store>store_region>store_state>store_country>All_store
DATASOURCE store;


CREATE CUBE sales_cube 
DATASOURCE sales
MEASURES store_sales AT sales.store_sales, store_cost AT sales.store_cost, unit_sales AT sales.unit_sales
REFERENCES DIMENSION customer_dim AT sales.customer_id,
					 date_dim AT sales.time_id,
					 product_dim AT sales.product_id,
					 promotion_dim AT sales.promotion_id,
					 store_dim AT sales.store_id;
                     